<div>
  <p-card header="Carga de datos admon saldos.">
    
    <p>
        Para iniciar el proceso de carga de <strong>admon sueldos</strong>, seleccione un archivo en formato
        <strong>CSV</strong> o <strong>Excel (.xlsx)</strong> utilizando el botón que aparece a continuación.
        <br>
        Este le permitirá buscar y elegir el archivo correspondiente desde su equipo.
    </p>


    <p-fileUpload
      mode="advanced"
      name="file"
      accept=".csv,.xlsx"
      maxFileSize="5000000"
      chooseLabel="Seleccione un archivo para iniciar la carga."
      [auto]="true"
      [customUpload]="true"
      [showUploadButton]="false"
      [showCancelButton]="false"
      (onSelect)="onFileSelect($event)">
    </p-fileUpload>

    <!-- PREVIEW -->
    <hr *ngIf="previewData.length">
    <h3 *ngIf="previewData.length" style="text-align: center;">
      Vista previa del archivo:
    </h3>

    <p-table
      *ngIf="previewData.length"
      [value]="previewData"
      responsiveLayout="scroll"
      class="mt-3">

      <ng-template pTemplate="header">
        <tr>
          <th *ngFor="let col of columns">{{ col }}</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-row>
        <tr>
          <td *ngFor="let col of columns">{{ row[col] }}</td>
        </tr>
      </ng-template>

    </p-table>

    <!-- INFO -->
    <div class="mt-3 text-center" *ngIf="previewData.length">
      <p>Mostrando los primeros {{ previewData.length }} registros.</p>
    </div>

    <!-- BOTÓN FINAL -->
    <div class="mt-3 text-center" *ngIf="previewData.length">
      <button
        pButton
        label="Iniciar carga de datos"
        icon="pi pi-send"
        class="p-button-success"
        (click)="sendToApi()">
      </button>
    </div>
  </p-card>
</div>
