<p-card header="Control de Incrementos.">
    <p class="m-0">
      Bienvenido {{ name }} al control de incrementos Ragasa.
    </p>
  
    <!-- ================= DIRECTOS ================= -->
    <h1>Directos</h1>
    <hr>
    <div class="card">
      <p-table
        [value]="jefes"
        dataKey="Nn"
        editMode="row"
        class="p-datatable-sm p-datatable-gridlines p-datatable-striped">
        [scrollable]="true"
        scrollHeight="70vh">
  
        <ng-template pTemplate="header">
          <tr>
            <th>Nn</th>
            <th>Nombre</th>
            <th>ID</th>
            <th>Puesto</th>
            <th>Jefe</th>
            <th>Fecha Ingreso</th>
            <th>Sem12023</th>
            <th>Sem22023</th>
            <th>Sueldo Mes Actual</th>
            <th>Aumento Sugerido</th>
            <th>Sueldo Mes Sugerido</th>
            <th>Aumento Otorgado</th>
            <th>Aumento Otorgado Jefe</th>
            <th>Sueldo Mes Nuevo</th>            
            <th>Acciones</th>
          </tr>
        </ng-template>
  
        <ng-template pTemplate="body" let-jefe let-editing="editing">
          <tr [pEditableRow]="jefe">
  
            <td>{{ jefe.Nn }}</td>
            <td>{{ jefe.Nombre }}</td>
            <td>{{ jefe.IdPuesto }}</td>
            <td>{{ jefe.Puesto }}</td>
            <td>{{ jefe.Jefe }}</td>
            <td>{{ jefe.FechaIngreso | date:'dd/MM/yyyy' }}</td>
            <td>{{ jefe.Sem12023 }}</td>
            <td>{{ jefe.Sem22023 }}</td>
  
            <td>{{ jefe.SueldoActual }}</td>

            <td>{{ jefe.PorcSugerido }} %</td>          
  
            <td>
              {{ jefe.SueldoActual * (1 + jefe.PorcSugerido / 100) | number:'1.2-2' }}
            </td>
            
            <td>
              <p-cellEditor>
                <ng-template pTemplate="input">
                  <input
                    type="number"
                    pInputText
                    [(ngModel)]="jefe.PorcOtorgado"
                    (ngModelChange)="recalcular(jefe)"
                    min="0"
                    max="100" />
                </ng-template>
                <ng-template pTemplate="output">
                  {{ jefe.PorcOtorgado }} %
                </ng-template>
              </p-cellEditor>
            </td>
            
  
            <td>
              <p-cellEditor>
                <ng-template pTemplate="input">
                  <input
                    type="number"
                    pInputText
                    [(ngModel)]="jefe.PorcOtorgadoJefe"
                    (ngModelChange)="recalcular(jefe)"
                    min="0"
                    max="100" />
                </ng-template>
                <ng-template pTemplate="output">
                  {{ jefe.PorcOtorgadoJefe }} %
                </ng-template>
              </p-cellEditor>
            </td>
  
            <td>{{ jefe.SueldoNuevo | number:'1.2-2' }}</td>            
  
            <td class="text-center">

                <!-- EDITAR -->
                <button
                  *ngIf="!editing && jefe.Nn !== miNn"
                  pButton
                  icon="pi pi-pencil"
                  pInitEditableRow
                  class="p-button-text p-button-sm">
                </button>
              
                <!-- GUARDAR -->
                <button
                  *ngIf="editing && jefe.Nn !== miNn"
                  pButton
                  icon="pi pi-check"
                  pSaveEditableRow
                  class="p-button-text p-button-sm p-button-success"
                  (click)="guardarFila(jefe)">
                </button>
              
                <!-- CANCELAR -->
                <button
                  *ngIf="editing && jefe.Nn !== miNn"
                  pButton
                  icon="pi pi-times"
                  pCancelEditableRow
                  class="p-button-text p-button-sm p-button-danger">
                </button>
              
              </td>                
          </tr>
        </ng-template>
      </p-table>
    </div>
  
    <hr style="margin-bottom: 50px;">
  
    <!-- ================= INDIRECTOS ================= -->
    <h1>Indirectos</h1>
    <hr>
    <div class="card">
      <p-table
        [value]="empleados"
        dataKey="Nn"
        editMode="row"
        class="p-datatable-sm p-datatable-gridlines p-datatable-striped">
        [scrollable]="true"
        scrollHeight="70vh">
  
        <ng-template pTemplate="header">
          <tr>
            <th>Nn</th>
            <th>Nombre</th>
            <th>ID</th>
            <th>Puesto</th>
            <th>Jefe</th>
            <th>Fecha Ingreso</th>
            <th>Sem12023</th>
            <th>Sem22023</th>
            <th>Sueldo Mes Actual</th>
            <th>Aumento Sugerido</th>
            <th>Sueldo Mes Sugerido</th>
            <th>Aumento Otorgado</th>
            <th>Aumento Otorgado Jefe</th>
            <th>Sueldo Mes Nuevo</th>            
            <th>Acciones</th>
          </tr>
        </ng-template>
  
        <ng-template pTemplate="body" let-empleado let-editing="editing">
          <tr
            [pEditableRow]="empleado"
            [class.p-disabled]="empleado.Nn == miNn">
  
            <td>{{ empleado.Nn }}</td>
            <td>{{ empleado.Nombre }}</td>
            <td>{{ empleado.IdPuesto }}</td>
            <td>{{ empleado.Puesto }}</td>
            <td>{{ empleado.Jefe }}</td>
            <td>{{ empleado.FechaIngreso | date:'dd/MM/yyyy' }}</td>
            <td>{{ empleado.Sem12023 }}</td>
            <td>{{ empleado.Sem22023 }}</td>
  
            <td>{{ empleado.SueldoActual }}</td>

            <td>{{ empleado.PorcSugerido }} %</td>          
  
            <td>
              {{ empleado.SueldoActual * (1 + empleado.PorcSugerido / 100) | number:'1.2-2' }}
            </td>
            
              

            <td>
              <p-cellEditor>
                <ng-template pTemplate="input">
                  <input
                    type="number"
                    pInputText
                    [(ngModel)]="empleado.PorcOtorgado"
                    (ngModelChange)="recalcular(empleado)"
                    min="0"
                    max="100" />
                </ng-template>
                <ng-template pTemplate="output">
                  {{ empleado.PorcOtorgado }} %
                </ng-template>
              </p-cellEditor>
            </td>
  
            <td>
              <p-cellEditor>
                <ng-template pTemplate="input">
                  <input
                    type="number"
                    pInputText
                    [(ngModel)]="empleado.PorcOtorgadoJefe"
                    (ngModelChange)="recalcular(empleado)"
                    min="0"
                    max="100" />
                </ng-template>
                <ng-template pTemplate="output">
                  {{ empleado.PorcOtorgadoJefe }} %
                </ng-template>
              </p-cellEditor>
            </td>
  
            <td>{{ empleado.SueldoNuevo | number:'1.2-2' }}</td>            
  
            <!-- ACCIONES -->
            <td class="text-center">

                <!-- EDITAR -->
                <button
                  *ngIf="!editing && empleado.Nn !== miNn"
                  pButton
                  icon="pi pi-pencil"
                  pInitEditableRow
                  class="p-button-text p-button-sm">
                </button>
              
                <!-- GUARDAR -->
                <button
                  *ngIf="editing && empleado.Nn !== miNn"
                  pButton
                  icon="pi pi-check"
                  pSaveEditableRow
                  class="p-button-text p-button-sm p-button-success"
                  (click)="guardarFila(empleado)">
                </button>
              
                <!-- CANCELAR -->
                <button
                  *ngIf="editing && empleado.Nn !== miNn"
                  pButton
                  icon="pi pi-times"
                  pCancelEditableRow
                  class="p-button-text p-button-sm p-button-danger">
                </button>
              
              </td>              
  
          </tr>
        </ng-template>
      </p-table>
    </div>
    <hr>
  </p-card>

  