<!-- <h1>
  Total Sueldos Mensuales: 
  ${{ totalSueldos | number:'1.2-2' }}
</h1>

<h1>
  Total Sueldos Mensuales Sugeridos: 
  ${{ totalSueldosSugeridos | number:'1.2-2' }}
</h1>

<h1>
  Total Sueldos Mensuales Otorgados: 
  ${{ totalSueldosOtorgado | number:'1.2-2' }}
</h1>

<h1>
  Total Sueldos Sugerido: 
  % {{ ((totalSueldosSugeridos / totalSueldos) - 1)*100 | number:'1.1-1'  }}
</h1>

<h1>
  Total Sueldos Otorgado: 
  % {{ ((totalSueldosOtorgado / totalSueldos) - 1)*100 | number:'1.1-1'  }}
</h1>  -->



<p-card class="section-card" header="Proceso de Administración de Sueldos 2025.">
    <p class="m-0">
      <strong>Gerencia Área 1 y 2</strong> <br>
      Hola {{ nombre }}, estas en el panel de control de los incrementos Ragasa.
    </p>    

    <hr>

    <div class="resumen-grid">

      <div class="resumen-item">
        <span class="label">Aumento total sugerido</span>
        <span class="valor sugerido">
          {{ (totalSueldosSugeridos / totalSueldos - 1) | percent:'1.1-1' }}
        </span>
      </div>
  
      <div class="resumen-item">
        <span class="label">Aumento total asignado</span>
        <span class="valor asignado">
          {{ (totalSueldosOtorgado / totalSueldos - 1) | percent:'1.1-1' }}
        </span>
      </div>
  
    </div>  

    <hr>

    <!-- ================= DIRECTOS ================= -->
    <div class="section">
      <h1>Directos</h1>
      <hr>
      <div class="card">
        <p-table
          [value]="jefes"
          dataKey="Nomina"
          editMode="row"
          class="p-datatable-sm p-datatable-gridlines p-datatable-striped">
          [scrollable]="true"
          style="max-height: 500px;">
    
          <ng-template pTemplate="header">
            <tr>
              <th>Nomina</th>
              <th>Nombre</th>
              <th>Cia</th>
              <th>Puesto</th>            
              <th>Fecha Ingreso</th>
              <th>Sem12023</th>
              <th>Sem22023</th>
              <th>Sueldo Mes Actual</th>
              <th>Aumento Sugerido</th>
              <th>Sueldo Mes Sugerido</th>
              <th>Aumento Otorgado</th>
              <th>Aumento Otorgado Jefe</th>
              <th>Sueldo Mes Nuevo</th>            
              <th>Acciones</th>
            </tr>
          </ng-template>
    
          <ng-template pTemplate="body" let-jefe let-editing="editing">
            <tr [pEditableRow]="jefe" [ngClass]="{ 'fila-verde': jefe._highlight }">
    
              <td>{{ jefe.Nomina }}</td>
              <td>{{ jefe.Nombre }}</td>
              <td>{{ jefe.Cia }}</td>
              <td>{{ jefe.Puesto }}</td>            
              <td>{{ jefe.FechaIngreso | date:'dd/MM/yyyy' }}</td>
              <td>{{ jefe.Sem12023 | number:'1.2-2'}}</td>
              <td>{{ jefe.Sem22023 | number:'1.2-2'}}</td>
    
              <td>${{ jefe.SueldoMensual | number:'1.2-2'}}</td>

              <td>{{ jefe.PorcIncrementoSugerido }} %</td>          
    
              <td>
                ${{ jefe.SueldoMensual * (1 + jefe.PorcIncrementoSugerido / 100) | number:'1.2-2' }}
              </td>
              
              <td>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input
                      type="number"
                      pInputText
                      [(ngModel)]="jefe.porcentaje_minimo"                    
                      [disabled]="supJefe == true"
                      min="0"
                      max="100" />
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ jefe.porcentaje_minimo }} %
                  </ng-template>
                </p-cellEditor>
              </td>
              
    
              <td>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input
                      type="number"
                      pInputText
                      [(ngModel)]="jefe.porcentaje_minimo_jefe"                    
                      [disabled]="supJefe == false"
                      min="0"
                      max="100" />
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ jefe.porcentaje_minimo_jefe }} %
                  </ng-template>
                </p-cellEditor>
              </td>
    
              <td>${{ (jefe.SueldoMensual*(1+(jefe.porcentaje_minimo_jefe/100))) | number:'1.2-2' }}</td>            
    
              <td class="text-center">

                  <!-- EDITAR -->
                  <button
                    *ngIf="!editing && jefe.Nomina !== nomina"
                    pButton
                    icon="pi pi-pencil"
                    pInitEditableRow
                    class="p-button-text p-button-sm">
                  </button>
                
                  <!-- GUARDAR -->
                  <button
                    *ngIf="editing && jefe.Nomina !== nomina"
                    pButton
                    icon="pi pi-check"
                    pSaveEditableRow
                    class="p-button-text p-button-sm p-button-success"
                    (click)="guardarFila(jefe)">
                  </button>
                
                  <!-- CANCELAR -->
                  <button
                    *ngIf="editing && jefe.Nomina !== nomina"
                    pButton
                    icon="pi pi-times"
                    pCancelEditableRow
                    class="p-button-text p-button-sm p-button-danger">
                  </button>
                
                </td>                
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>    
  
    <hr style="margin-bottom: 50px;">
  
    <!-- ================= INDIRECTOS ================= -->
    <div class="section">
      <h1>Indirectos</h1>
      <hr>
      <div class="card">
        <p-table
          [value]="empleados"
          dataKey="Nomina"
          editMode="row"
          class="p-datatable-sm p-datatable-gridlines p-datatable-striped">
          [scrollable]="true"
          style="max-height: 500px;">

          <ng-template pTemplate="header">
            <tr>
              <th>Nomina</th>
              <th>Nombre</th>
              <th>Cia</th>
              <th>Puesto</th>
              <th>Jefe</th>
              <th>Fecha Ingreso</th>
              <th>Sem12023</th>
              <th>Sem22023</th>
              <th>Sueldo Mes Actual</th>
              <th>Aumento Sugerido</th>
              <th>Sueldo Mes Sugerido</th>
              <th>Aumento Otorgado</th>
              <th>Aumento Otorgado Jefe</th>
              <th>Sueldo Mes Nuevo</th>            
              <th>Acciones</th>
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-empleado let-editing="editing">
            <tr
              [pEditableRow]="empleado"                          
              [ngClass]="{ 'fila-verde': empleado._highlight }">              
              <td>{{ empleado.Nomina }}</td>
              <td>{{ empleado.Nombre }}</td>
              <td>{{ empleado.Cia }}</td>
              <td>{{ empleado.Puesto }}</td>
              <td>{{ empleado.Jefe }}</td>
              <td>{{ empleado.FechaIngreso | date:'dd/MM/yyyy' }}</td>
              <td>{{ empleado.Sem12023 | number:'1.2-2' }}</td>
              <td>{{ empleado.Sem22023 | number:'1.2-2' }}</td>

              <td>${{ empleado.SueldoMensual | number:'1.2-2' }}</td>

              <td>{{ empleado.PorcIncrementoSugerido }} %</td>          

              <td>
                ${{ empleado.SueldoMensual * (1 + empleado.PorcIncrementoSugerido / 100) | number:'1.2-2' }}
              </td>
              
                

              <td>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input
                      type="number"
                      pInputText
                      [(ngModel)]="empleado.porcentaje_minimo"                    
                      [disabled]="supJefe == true"
                      min="0"
                      max="100" />
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ empleado.porcentaje_minimo }} %
                  </ng-template>
                </p-cellEditor>
              </td>

              <td>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input
                      type="number"
                      pInputText
                      [(ngModel)]="empleado.porcentaje_minimo_jefe"                    
                      [disabled]="supJefe == false"
                      min="0"
                      max="100" />
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ empleado.porcentaje_minimo_jefe }} %
                  </ng-template>
                </p-cellEditor>
              </td>
                
              <td>${{ (empleado.SueldoMensual*(1+(empleado.porcentaje_minimo_jefe/100))) | number:'1.2-2' }}</td>                      

              <!-- ACCIONES -->
              <td class="text-center">

                  <!-- EDITAR -->
                  <button
                    *ngIf="!editing && empleado.Nomina !== nomina"
                    pButton
                    icon="pi pi-pencil"
                    pInitEditableRow
                    class="p-button-text p-button-sm">
                  </button>
                
                  <!-- GUARDAR -->
                  <button
                    *ngIf="editing && empleado.Nomina !== nomina"
                    pButton
                    icon="pi pi-check"
                    pSaveEditableRow
                    class="p-button-text p-button-sm p-button-success"
                    (click)="guardarFila(empleado)">
                  </button>
                
                  <!-- CANCELAR -->
                  <button
                    *ngIf="editing && empleado.Nomina !== nomina"
                    pButton
                    icon="pi pi-times"
                    pCancelEditableRow
                    class="p-button-text p-button-sm p-button-danger">
                  </button>
                
                </td>              

            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
    <hr>
    
    <div class="incrementos-card">
      <p-button 
        label="Generar PDF" 
        icon="pi pi-file-pdf" 
        class="incrementos-btn"
        (click)="generarPDF()">
      </p-button>
    </div>
  </p-card>

  